!function(){"use strict";function n(n,t,o){r(n,"before").reverse().forEach(function(n){return n(t,o)})}function t(n,t,o){e(t,r(n,"then"),o)}function o(n,t,o){e(t,r(n,"fail"),o)}function r(n,t){return n.filter(function(n){return n.hasOwnProperty(t)}).map(function(n){return n[t]})}function e(n,t,o){var r=t[0];r?r.apply(void 0,n.concat([function(r){r&&(n[0]=r),e(n,t.slice(1),o)}])):o(n[0])}var i={before:n,done:t,fail:o},c=[];window.addFetchFilter=function(n){c.push(n)};var u="Bouncing between rejected and resolved, stopping loop",f=window.fetch;window.fetch=function(n,t){return new Promise(function(o,r){i.before(c,n,t);var e=f(n,t);e.then(function(e){var f=function(){throw r(u),new Error(u)},a=function(o){i.fail(c,[o,n,t,f],function(){return r(o)})};i.done(c,[e,n,t,a],function(n){return o(n)})}),e.catch(function(e){var f=function(){throw r(e),new Error(u)},a=function(r){i.done(c,[r,n,t,f],function(n){return o(n)})};i.fail(c,[e,n,t,a],function(){return r(e)})})})}}();
